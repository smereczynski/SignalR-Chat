# Copy to .env.local and fill in your Azure resources
# These map to Startup.cs expectations (Configuration["Cosmos:..."] and ["Redis:..."])

## Microsoft Entra ID Multi-Tenant Authentication (OpenID Connect)
# ClientId and ClientSecret can also be provided via ConnectionStrings__EntraId in format:
# ConnectionStrings__EntraId="ClientId=<your-client-id>;ClientSecret=<your-client-secret>"
EntraId__Instance=https://login.microsoftonline.com/
EntraId__TenantId=organizations
EntraId__ClientId=
EntraId__ClientSecret=
EntraId__CallbackPath=/signin-oidc
EntraId__SignedOutCallbackPath=/signout-callback-oidc

# Entra ID Authorization Configuration
# AllowedTenants: Comma-separated list of tenant IDs allowed to authenticate (CRITICAL for multi-tenant security)
# Example: EntraId__Authorization__AllowedTenants__0=tenant-guid-1
#          EntraId__Authorization__AllowedTenants__1=tenant-guid-2
EntraId__Authorization__AllowedTenants__0=
EntraId__Authorization__RequireTenantValidation=true
EntraId__AutomaticSso__Enable=true
EntraId__AutomaticSso__AttemptCookieName=sso_attempted_v2

# Fallback to OTP when Entra ID authentication fails or user not authorized
EntraId__Fallback__EnableOtp=true
EntraId__Fallback__OtpForUnauthorizedUsers=false

# Cosmos DB
Cosmos__ConnectionString=''
Cosmos__Database=chat
Cosmos__UsersContainer=users
Cosmos__RoomsContainer=rooms
Cosmos__MessagesContainer=messages
## TTL behavior (optional):
# Cosmos__MessagesTtlSeconds=<seconds>|-1|null
#  - set seconds (e.g., 604800 for 7 days)
#  - set -1 to enable TTL but never expire by default
#  - leave empty or set to 'null' to disable TTL entirely


# Redis (StackExchange.Redis)
Redis__ConnectionString=''

# Azure SignalR connection string is picked up automatically by the Azure SignalR SDK via ConnectionStrings:Azure:SignalR or Azure__SignalR__ConnectionString if needed.
# If your setup requires env-based binding, you can add:
# Azure__SignalR__ConnectionString=

# Azure Communication Services (Email/SMS)
# If provided, the app will send OTP using ACS instead of console
Acs__ConnectionString=''
Acs__EmailFrom=
Acs__SmsFrom=

# OpenTelemetry / Observability Configuration
# For local development with OpenTelemetry Collector (Grafana stack)
# OTel__OtlpEndpoint=http://localhost:4317
# OTel__OtlpEndpoint=http://localhost:4318  # Use 4318 for HTTP/Protobuf

# Application Insights (Production monitoring)
# APPLICATIONINSIGHTS_CONNECTION_STRING=InstrumentationKey=...;IngestionEndpoint=https://...

# OTP Security (REQUIRED for production)
# Generate secure 32+ byte Base64 pepper: openssl rand -base64 32
# Otp__Pepper=

# Logging Configuration
# Enable file logging (disabled by default to avoid unnecessary disk I/O)
# Logs are written to logs/chat-YYYYMMDD.log with 7-day retention
# Useful for local troubleshooting or debugging
# Serilog__WriteToFile=true
